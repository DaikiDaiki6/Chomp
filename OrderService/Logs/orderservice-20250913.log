[2025-09-13 08:42:54.427 +08:00 INF Starting up OrderService {}
][2025-09-13 08:42:54.573 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_6bdyyy858hofcogxbdq9rzu4yu, Consumer: OrderService.Consumers.PaymentFailedConsumer {"SourceContext":"MassTransit"}
][2025-09-13 08:42:54.584 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_6bdyyy858hofcogxbdq9rzu4yu, Consumer: OrderService.Consumers.PaymentSucceededConsumer {"SourceContext":"MassTransit"}
][2025-09-13 08:42:54.736 +08:00 INF Now listening on: http://localhost:5221 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:42:54.749 +08:00 INF Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:42:54.751 +08:00 INF Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:42:54.754 +08:00 INF Content root path: C:\Users\jeffr\Documents\Programming\Chomp\OrderService {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:42:54.967 +08:00 INF Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 08:43:09.742 +08:00 INF Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:43:09.802 +08:00 INF Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 08:43:13.805 +08:00 INF Starting up OrderService {}
][2025-09-13 08:43:13.928 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_zyaoyy858hofcc6ebdq9rzwfr7, Consumer: OrderService.Consumers.PaymentFailedConsumer {"SourceContext":"MassTransit"}
][2025-09-13 08:43:13.933 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_zyaoyy858hofcc6ebdq9rzwfr7, Consumer: OrderService.Consumers.PaymentSucceededConsumer {"SourceContext":"MassTransit"}
][2025-09-13 08:43:14.066 +08:00 INF Now listening on: http://localhost:5221 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:43:14.069 +08:00 INF Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:43:14.070 +08:00 INF Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:43:14.072 +08:00 INF Content root path: C:\Users\jeffr\Documents\Programming\Chomp\OrderService {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 08:43:14.205 +08:00 INF Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 08:48:14.264 +08:00 INF Usage Telemetry: {"id":"b8310000-fb3f-2056-8736-08ddf25e859c","created":"2025-09-13T08:43:13.8954782\u002B08:00","host":{"framework_version":"8.0.17","mass_transit_version":"8.5.2.0","operating_system_version":"Microsoft Windows NT 10.0.26100.0","time_zone_info":"(UTC\u002B08:00) Kuala Lumpur, Singapore","commit_hash":"96adb565f7cc311488d1df104549f924203be760"},"bus":[{"created":"2025-09-13T08:43:13.8971955\u002B08:00","configured":"2025-09-13T08:43:14.0147406\u002B08:00","started":"2025-09-13T08:43:14.2047743\u002B08:00","name":"IBus","endpoints":[{"name":"DESKTOPHUMQD41_OrderService_endpoint_zyaoyy858hofcc6ebdq9rzwfr7","type":"RabbitMQ","prefetch_count":16,"consumer_count":2,"message_count":2},{"name":"_bus_","type":"RabbitMQ","prefetch_count":16}]}]} {"SourceContext":"MassTransit"}
][2025-09-13 09:00:28.959 +08:00 INF Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:00:29.022 +08:00 INF Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:00:33.760 +08:00 INF Starting up OrderService {}
][2025-09-13 09:00:33.888 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_pbfoyy858hofpy5gbdq9ra8td4, Consumer: OrderService.Consumers.PaymentFailedConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:00:33.893 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_pbfoyy858hofpy5gbdq9ra8td4, Consumer: OrderService.Consumers.PaymentSucceededConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:00:34.020 +08:00 INF Now listening on: http://localhost:5221 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:00:34.024 +08:00 INF Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:00:34.027 +08:00 INF Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:00:34.030 +08:00 INF Content root path: C:\Users\jeffr\Documents\Programming\Chomp\OrderService {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:00:34.190 +08:00 INF Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:00:53.921 +08:00 WRN Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNFIC3UMEFHM:00000001","RequestPath":"/","ConnectionId":"0HNFIC3UMEFHM"}
][2025-09-13 09:01:11.947 +08:00 INF Getting all orders - Admin Request {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"0855d5c4-3ef3-4819-9a71-4393c0cfb849","ActionName":"OrderService.Controllers.OrderController.GetAll (OrderService)","RequestId":"0HNFIC3UMEFHN:00000003","RequestPath":"/api/Order","ConnectionId":"0HNFIC3UMEFHN"}
][2025-09-13 09:01:50.812 +08:00 INF Creating an order for customer "ee0898ea-71f4-4b86-bd41-8ae6729baf7e". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"078b1d15-de26-4a7e-a34c-9789123cf3c2","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC3UMEFHN:00000004","RequestPath":"/api/Order","ConnectionId":"0HNFIC3UMEFHN"}
][2025-09-13 09:01:50.927 +08:00 ERR An exception occurred while iterating over the results of a query for context type 'OrderService.Data.OrdersDbContext'.
System.InvalidCastException: Column 'UpdatedAt' is null.
   at Npgsql.ThrowHelper.ThrowInvalidCastException_NoValue(FieldDescription field)
   at Npgsql.NpgsqlDataReader.DbNullValueOrThrow[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetFieldValueCore[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetDateTime(Int32 ordinal)
   at lambda_method190(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync() {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Query","ActionId":"078b1d15-de26-4a7e-a34c-9789123cf3c2","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC3UMEFHN:00000004","RequestPath":"/api/Order","ConnectionId":"0HNFIC3UMEFHN"}
System.InvalidCastException: Column 'UpdatedAt' is null.
   at Npgsql.ThrowHelper.ThrowInvalidCastException_NoValue(FieldDescription field)
   at Npgsql.NpgsqlDataReader.DbNullValueOrThrow[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetFieldValueCore[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetDateTime(Int32 ordinal)
   at lambda_method190(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
][2025-09-13 09:01:50.937 +08:00 ERR Unhandled exception occurred while processing /api/Order {"RequestId":"0HNFIC3UMEFHN:00000004","RequestPath":"/api/Order","ConnectionId":"0HNFIC3UMEFHN"}
System.InvalidCastException: Column 'UpdatedAt' is null.
   at Npgsql.ThrowHelper.ThrowInvalidCastException_NoValue(FieldDescription field)
   at Npgsql.NpgsqlDataReader.DbNullValueOrThrow[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetFieldValueCore[T](Int32 ordinal)
   at Npgsql.NpgsqlDataReader.GetDateTime(Int32 ordinal)
   at lambda_method190(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at OrderService.Services.OrderService.CreateOrderAsync(CreateOrderDto dto) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Services\OrderService.cs:line 70
   at OrderService.Controllers.OrderController.CreateOrder(CreateOrderDto dto) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Controllers\OrderController.cs:line 68
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at OrderService.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Middleware\ExceptionHandlingMiddleware.cs:line 21
][2025-09-13 09:02:36.779 +08:00 INF Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:02:36.843 +08:00 INF Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:03:35.026 +08:00 INF Starting up OrderService {}
][2025-09-13 09:03:35.154 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_ko6oyy858hofcscxbdq9rak7rf, Consumer: OrderService.Consumers.PaymentFailedConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:03:35.160 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_ko6oyy858hofcscxbdq9rak7rf, Consumer: OrderService.Consumers.PaymentSucceededConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:03:35.297 +08:00 INF Now listening on: http://localhost:5221 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:03:35.300 +08:00 INF Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:03:35.302 +08:00 INF Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:03:35.304 +08:00 INF Content root path: C:\Users\jeffr\Documents\Programming\Chomp\OrderService {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:03:35.439 +08:00 INF Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:03:42.531 +08:00 WRN Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNFIC5GUG7HG:00000001","RequestPath":"/api/Order","ConnectionId":"0HNFIC5GUG7HG"}
][2025-09-13 09:03:42.708 +08:00 INF Creating an order for customer "9589c96e-11f7-499b-aafd-ce641645730a". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"941e8b37-5141-4a17-85c5-1f18094a9721","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC5GUG7HG:00000001","RequestPath":"/api/Order","ConnectionId":"0HNFIC5GUG7HG"}
][2025-09-13 09:03:43.925 +08:00 INF Created order event for order "04307d3e-e2d5-4db1-b9c2-b37c2f4c472a" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"941e8b37-5141-4a17-85c5-1f18094a9721","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC5GUG7HG:00000001","RequestPath":"/api/Order","ConnectionId":"0HNFIC5GUG7HG"}
][2025-09-13 09:03:44.050 +08:00 INF Successfully created order "04307d3e-e2d5-4db1-b9c2-b37c2f4c472a". {"SourceContext":"OrderService.Services.OrderService","ActionId":"941e8b37-5141-4a17-85c5-1f18094a9721","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC5GUG7HG:00000001","RequestPath":"/api/Order","ConnectionId":"0HNFIC5GUG7HG"}
][2025-09-13 09:03:44.055 +08:00 INF Successfully created order "04307d3e-e2d5-4db1-b9c2-b37c2f4c472a". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"941e8b37-5141-4a17-85c5-1f18094a9721","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC5GUG7HG:00000001","RequestPath":"/api/Order","ConnectionId":"0HNFIC5GUG7HG"}
][2025-09-13 09:07:38.906 +08:00 INF Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:07:38.976 +08:00 INF Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:08:13.228 +08:00 INF Starting up OrderService {}
][2025-09-13 09:08:13.360 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_xy9oyy858hofpdp1bdq9raodna, Consumer: OrderService.Consumers.PaymentFailedConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:08:13.365 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_xy9oyy858hofpdp1bdq9raodna, Consumer: OrderService.Consumers.PaymentSucceededConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:08:13.492 +08:00 INF Now listening on: http://localhost:5221 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:08:13.496 +08:00 INF Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:08:13.498 +08:00 INF Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:08:13.499 +08:00 INF Content root path: C:\Users\jeffr\Documents\Programming\Chomp\OrderService {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:08:13.629 +08:00 INF Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:08:25.387 +08:00 WRN Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNFIC8581EOL:00000001","RequestPath":"/api/Order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:08:25.494 +08:00 INF Getting all orders - Admin Request {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"ef233998-5ae9-4c12-a3d4-7b4c92525265","ActionName":"OrderService.Controllers.OrderController.GetAll (OrderService)","RequestId":"0HNFIC8581EOL:00000001","RequestPath":"/api/Order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:08:32.344 +08:00 INF Creating an order for customer "ebf49409-3f77-4901-9ec9-302ccf740286". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"8827c50d-ac04-41f6-86e0-861a5beeedcf","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000002","RequestPath":"/api/Order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:08:32.600 +08:00 INF Created order event for order "2936b568-4e9b-441c-a0b3-457af4e51549" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"8827c50d-ac04-41f6-86e0-861a5beeedcf","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000002","RequestPath":"/api/Order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:08:32.713 +08:00 INF Successfully created order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Services.OrderService","ActionId":"8827c50d-ac04-41f6-86e0-861a5beeedcf","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000002","RequestPath":"/api/Order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:08:32.720 +08:00 INF Successfully created order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"8827c50d-ac04-41f6-86e0-861a5beeedcf","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000002","RequestPath":"/api/Order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:08:52.935 +08:00 INF Getting order - Admin Request for order "2936b568-4e9b-441c-a0b3-457af4e51549" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"cdcd7675-abfc-4e08-9f3b-e90847425fad","ActionName":"OrderService.Controllers.OrderController.GetOrderById (OrderService)","RequestId":"0HNFIC8581EOL:00000003","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:08:58.315 +08:00 INF Getting order - Admin Request for order "2936b568-4e9b-441c-a0b3-457af4e5154c" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"cdcd7675-abfc-4e08-9f3b-e90847425fad","ActionName":"OrderService.Controllers.OrderController.GetOrderById (OrderService)","RequestId":"0HNFIC8581EOL:00000004","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e5154c","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:09:03.840 +08:00 INF Getting order - Admin Request for order "2936b568-4e9b-441c-a0b3-457af4e51549" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"cdcd7675-abfc-4e08-9f3b-e90847425fad","ActionName":"OrderService.Controllers.OrderController.GetOrderById (OrderService)","RequestId":"0HNFIC8581EOL:00000005","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:09:15.537 +08:00 INF Updating order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000006","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:09:15.554 +08:00 WRN Order update failed - Products not found in database: 3fa85f64-5717-4562-b3fc-2c963f66afa6 {"SourceContext":"OrderService.Services.OrderService","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000006","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:10:32.229 +08:00 INF Updating order "4a301a51-2190-4171-a422-036f71e02517". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000007","RequestPath":"/api/Order/4a301a51-2190-4171-a422-036f71e02517","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:10:32.236 +08:00 WRN No order "4a301a51-2190-4171-a422-036f71e02517" found in the database. {"SourceContext":"OrderService.Services.OrderService","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000007","RequestPath":"/api/Order/4a301a51-2190-4171-a422-036f71e02517","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:10:35.196 +08:00 INF Updating order "4a301a51-2190-4171-a422-036f71e02517". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000008","RequestPath":"/api/Order/4a301a51-2190-4171-a422-036f71e02517","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:10:35.213 +08:00 WRN No order "4a301a51-2190-4171-a422-036f71e02517" found in the database. {"SourceContext":"OrderService.Services.OrderService","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000008","RequestPath":"/api/Order/4a301a51-2190-4171-a422-036f71e02517","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:10:49.482 +08:00 INF Updating order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000009","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:10:49.493 +08:00 WRN Order update failed - Products not found in database: 3fa85f64-5717-4562-b3fc-2c963f66afa6 {"SourceContext":"OrderService.Services.OrderService","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:00000009","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:05.897 +08:00 INF Updating order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000A","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:05.906 +08:00 INF Performing smart merge for order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Services.OrderService","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000A","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:05.932 +08:00 INF Updated order event for order "2936b568-4e9b-441c-a0b3-457af4e51549" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000A","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:05.956 +08:00 INF Successfully updated order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Services.OrderService","ActionId":"4c762d9f-5ec1-4ff6-b33b-436bda15d1d8","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000A","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:50.342 +08:00 INF Confirming order "2936b568-4e9b-441c-a0b3-457af4e5154c". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"105dd383-5d19-4b58-850a-955014ccdad8","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000B","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e5154c/confirm-order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:50.351 +08:00 WRN No order "2936b568-4e9b-441c-a0b3-457af4e5154c" found in the database. {"SourceContext":"OrderService.Services.OrderService","ActionId":"105dd383-5d19-4b58-850a-955014ccdad8","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000B","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e5154c/confirm-order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:54.445 +08:00 INF Confirming order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"105dd383-5d19-4b58-850a-955014ccdad8","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000C","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/confirm-order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:54.455 +08:00 INF Order "2936b568-4e9b-441c-a0b3-457af4e51549" total price: $29.98 {"SourceContext":"OrderService.Services.OrderService","ActionId":"105dd383-5d19-4b58-850a-955014ccdad8","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000C","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/confirm-order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:54.460 +08:00 INF Order confirmed event for order "2936b568-4e9b-441c-a0b3-457af4e51549" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"105dd383-5d19-4b58-850a-955014ccdad8","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000C","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/confirm-order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:54.479 +08:00 INF Successfully confirmed order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Services.OrderService","ActionId":"105dd383-5d19-4b58-850a-955014ccdad8","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000C","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/confirm-order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:54.486 +08:00 INF Successfully confirmed order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"105dd383-5d19-4b58-850a-955014ccdad8","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFIC8581EOL:0000000C","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/confirm-order","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:11:54.710 +08:00 INF Processing payment success - PaymentId: "4c7f2dfb-eb85-49ad-b43f-3738fff8883a", OrderId: "2936b568-4e9b-441c-a0b3-457af4e51549" {"SourceContext":"OrderService.Consumers.PaymentSucceededConsumer"}
][2025-09-13 09:11:54.729 +08:00 INF Stock reduced - Product "2a52e756-1027-4fbf-a495-9c02648fd588" (Piattos): Reduced by 2, New stock: 28 {"SourceContext":"OrderService.Consumers.PaymentSucceededConsumer"}
][2025-09-13 09:11:54.737 +08:00 INF Payment processing completed - OrderId: "2936b568-4e9b-441c-a0b3-457af4e51549", PaymentId: "4c7f2dfb-eb85-49ad-b43f-3738fff8883a", Status: "Completed", Stock updates: Piattos: 2 units (New stock: 28) {"SourceContext":"OrderService.Consumers.PaymentSucceededConsumer"}
][2025-09-13 09:13:13.656 +08:00 INF Usage Telemetry: {"id":"783f0000-fb3f-2056-c701-08ddf2620357","created":"2025-09-13T09:08:13.3280228\u002B08:00","host":{"framework_version":"8.0.17","mass_transit_version":"8.5.2.0","operating_system_version":"Microsoft Windows NT 10.0.26100.0","time_zone_info":"(UTC\u002B08:00) Kuala Lumpur, Singapore","commit_hash":"96adb565f7cc311488d1df104549f924203be760"},"bus":[{"created":"2025-09-13T09:08:13.3296399\u002B08:00","configured":"2025-09-13T09:08:13.4424027\u002B08:00","started":"2025-09-13T09:08:13.6285869\u002B08:00","name":"IBus","endpoints":[{"name":"DESKTOPHUMQD41_OrderService_endpoint_xy9oyy858hofpdp1bdq9raodna","type":"RabbitMQ","prefetch_count":16,"consumer_count":2,"message_count":2},{"name":"_bus_","type":"RabbitMQ","prefetch_count":16}]}]} {"SourceContext":"MassTransit"}
][2025-09-13 09:13:15.253 +08:00 INF Adding items to order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"b38d4ad9-0704-4b74-b217-63aafe341138","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFIC8581EOL:0000000D","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:13:15.264 +08:00 INF Processing 1 valid items to add to order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Services.OrderService","ActionId":"b38d4ad9-0704-4b74-b217-63aafe341138","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFIC8581EOL:0000000D","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:13:15.272 +08:00 INF Successfully added/updated items in order "2936b568-4e9b-441c-a0b3-457af4e51549": 1 new, 0 updated. {"SourceContext":"OrderService.Services.OrderService","ActionId":"b38d4ad9-0704-4b74-b217-63aafe341138","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFIC8581EOL:0000000D","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:13:15.278 +08:00 INF Updated order event for order "2936b568-4e9b-441c-a0b3-457af4e51549" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"b38d4ad9-0704-4b74-b217-63aafe341138","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFIC8581EOL:0000000D","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:13:15.288 +08:00 INF Successfully updated order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Services.OrderService","ActionId":"b38d4ad9-0704-4b74-b217-63aafe341138","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFIC8581EOL:0000000D","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFIC8581EOL"}
][2025-09-13 09:22:16.869 +08:00 INF Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:22:16.930 +08:00 INF Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:22:25.351 +08:00 INF Starting up OrderService {}
][2025-09-13 09:22:25.495 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_konyyy858hofpgymbdq9ra99nb, Consumer: OrderService.Consumers.PaymentFailedConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:22:25.500 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_konyyy858hofpgymbdq9ra99nb, Consumer: OrderService.Consumers.PaymentSucceededConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:22:25.631 +08:00 INF Now listening on: http://localhost:5221 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:22:25.635 +08:00 INF Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:22:25.637 +08:00 INF Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:22:25.639 +08:00 INF Content root path: C:\Users\jeffr\Documents\Programming\Chomp\OrderService {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:22:25.784 +08:00 INF Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:22:34.922 +08:00 WRN Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNFICG2DQ6TJ:00000001","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:22:35.040 +08:00 INF Getting order - Admin Request for order "2936b568-4e9b-441c-a0b3-457af4e51549" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"a035e860-b4f4-4fe1-a2f8-770573f5cc4a","ActionName":"OrderService.Controllers.OrderController.GetOrderById (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000001","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:22:40.907 +08:00 INF Updating order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"dbca0511-7542-432f-85ce-ed1d054d92eb","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000002","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:22:40.932 +08:00 WRN Order Edit failed - Order "2936b568-4e9b-441c-a0b3-457af4e51549" is already "Completed". {"SourceContext":"OrderService.Services.OrderService","ActionId":"dbca0511-7542-432f-85ce-ed1d054d92eb","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000002","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:23:01.300 +08:00 INF Confirming order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"54715d3b-b33e-4340-ac15-fcc04da621de","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000003","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/confirm-order","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:23:01.359 +08:00 WRN Order confirmation failed - Order "2936b568-4e9b-441c-a0b3-457af4e51549" is already "Completed". {"SourceContext":"OrderService.Services.OrderService","ActionId":"54715d3b-b33e-4340-ac15-fcc04da621de","ActionName":"OrderService.Controllers.OrderController.ConfirmOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000003","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/confirm-order","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:24:20.680 +08:00 INF Adding items to order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"8b27cb8c-dc7a-4284-9756-024b74a624f9","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000004","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:24:20.691 +08:00 WRN Order Item Addition failed - Order "2936b568-4e9b-441c-a0b3-457af4e51549" is already "Completed". {"SourceContext":"OrderService.Services.OrderService","ActionId":"8b27cb8c-dc7a-4284-9756-024b74a624f9","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000004","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:24:33.233 +08:00 INF Removing items from order "2936b568-4e9b-441c-a0b3-457af4e51549". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"7f13ef82-9e1a-4b6b-9e85-0dddc39f5f4d","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000005","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:24:33.241 +08:00 WRN Order Item Removing failed - Order "2936b568-4e9b-441c-a0b3-457af4e51549" is already "Completed". {"SourceContext":"OrderService.Services.OrderService","ActionId":"7f13ef82-9e1a-4b6b-9e85-0dddc39f5f4d","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000005","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549/items","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:24:51.415 +08:00 INF DeleteOrder endpoint called for user: "2936b568-4e9b-441c-a0b3-457af4e51549" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"bd8aaa6f-d7e2-403d-918b-762bc12fe124","ActionName":"OrderService.Controllers.OrderController.DeleteOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000006","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:24:51.437 +08:00 WRN Order deletion failed - Order "2936b568-4e9b-441c-a0b3-457af4e51549" is already "Completed". {"SourceContext":"OrderService.Services.OrderService","ActionId":"bd8aaa6f-d7e2-403d-918b-762bc12fe124","ActionName":"OrderService.Controllers.OrderController.DeleteOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000006","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:24:51.444 +08:00 ERR Unhandled exception occurred while processing /api/Order/2936b568-4e9b-441c-a0b3-457af4e51549 {"RequestId":"0HNFICG2DQ6TJ:00000006","RequestPath":"/api/Order/2936b568-4e9b-441c-a0b3-457af4e51549","ConnectionId":"0HNFICG2DQ6TJ"}
System.InvalidOperationException: Order is already Completed. Only pending orders can be deleted.
   at OrderService.Services.OrderService.DeleteOrderAsync(Guid id) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Services\OrderService.cs:line 553
   at OrderService.Controllers.OrderController.DeleteOrder(Guid id) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Controllers\OrderController.cs:line 192
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at OrderService.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Middleware\ExceptionHandlingMiddleware.cs:line 21
][2025-09-13 09:25:37.120 +08:00 INF Getting order - Admin Request for order "9afe599a-d222-42d6-aa6b-a0ee05cb99d1" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"a035e860-b4f4-4fe1-a2f8-770573f5cc4a","ActionName":"OrderService.Controllers.OrderController.GetOrderById (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000007","RequestPath":"/api/Order/9afe599a-d222-42d6-aa6b-a0ee05cb99d1","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:25:59.783 +08:00 INF DeleteOrder endpoint called for user: "9afe599a-d222-42d6-aa6b-a0ee05cb99d1" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"bd8aaa6f-d7e2-403d-918b-762bc12fe124","ActionName":"OrderService.Controllers.OrderController.DeleteOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000008","RequestPath":"/api/Order/9afe599a-d222-42d6-aa6b-a0ee05cb99d1","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:25:59.872 +08:00 INF Deleted order event for order "9afe599a-d222-42d6-aa6b-a0ee05cb99d1" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"bd8aaa6f-d7e2-403d-918b-762bc12fe124","ActionName":"OrderService.Controllers.OrderController.DeleteOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000008","RequestPath":"/api/Order/9afe599a-d222-42d6-aa6b-a0ee05cb99d1","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:25:59.977 +08:00 INF Successfully deleted order "9afe599a-d222-42d6-aa6b-a0ee05cb99d1". {"SourceContext":"OrderService.Services.OrderService","ActionId":"bd8aaa6f-d7e2-403d-918b-762bc12fe124","ActionName":"OrderService.Controllers.OrderController.DeleteOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000008","RequestPath":"/api/Order/9afe599a-d222-42d6-aa6b-a0ee05cb99d1","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:27:25.808 +08:00 INF Usage Telemetry: {"id":"54040000-fb3f-2056-efdd-08ddf263ff40","created":"2025-09-13T09:22:25.4609039\u002B08:00","host":{"framework_version":"8.0.17","mass_transit_version":"8.5.2.0","operating_system_version":"Microsoft Windows NT 10.0.26100.0","time_zone_info":"(UTC\u002B08:00) Kuala Lumpur, Singapore","commit_hash":"96adb565f7cc311488d1df104549f924203be760"},"bus":[{"created":"2025-09-13T09:22:25.4625319\u002B08:00","configured":"2025-09-13T09:22:25.5795558\u002B08:00","started":"2025-09-13T09:22:25.7840060\u002B08:00","name":"IBus","endpoints":[{"name":"DESKTOPHUMQD41_OrderService_endpoint_konyyy858hofpgymbdq9ra99nb","type":"RabbitMQ","prefetch_count":16,"consumer_count":2,"message_count":2},{"name":"_bus_","type":"RabbitMQ","prefetch_count":16}]}]} {"SourceContext":"MassTransit"}
][2025-09-13 09:27:39.522 +08:00 INF Creating an order for customer "763a0cdd-cbcf-45c0-8789-82ad308946ae". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"4a83761a-83e4-4c3d-ae3e-9b86d2a90901","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000009","RequestPath":"/api/Order","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:27:39.748 +08:00 INF Created order event for order "36f59c20-4ee3-4838-9fbc-7859bac45073" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"4a83761a-83e4-4c3d-ae3e-9b86d2a90901","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000009","RequestPath":"/api/Order","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:27:39.769 +08:00 INF Successfully created order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"4a83761a-83e4-4c3d-ae3e-9b86d2a90901","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000009","RequestPath":"/api/Order","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:27:39.773 +08:00 INF Successfully created order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"4a83761a-83e4-4c3d-ae3e-9b86d2a90901","ActionName":"OrderService.Controllers.OrderController.CreateOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:00000009","RequestPath":"/api/Order","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:27:49.842 +08:00 INF Getting order - Admin Request for order "36f59c20-4ee3-4838-9fbc-7859bac45073" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"a035e860-b4f4-4fe1-a2f8-770573f5cc4a","ActionName":"OrderService.Controllers.OrderController.GetOrderById (OrderService)","RequestId":"0HNFICG2DQ6TJ:0000000A","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:29:11.284 +08:00 INF Updating order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"dbca0511-7542-432f-85ce-ed1d054d92eb","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:0000000B","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:29:11.312 +08:00 INF Performing smart merge for order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"dbca0511-7542-432f-85ce-ed1d054d92eb","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:0000000B","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:29:11.339 +08:00 INF Updated order event for order "36f59c20-4ee3-4838-9fbc-7859bac45073" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"dbca0511-7542-432f-85ce-ed1d054d92eb","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:0000000B","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:29:11.356 +08:00 INF Successfully updated order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"dbca0511-7542-432f-85ce-ed1d054d92eb","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICG2DQ6TJ:0000000B","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICG2DQ6TJ"}
][2025-09-13 09:31:31.400 +08:00 INF Adding items to order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"8b27cb8c-dc7a-4284-9756-024b74a624f9","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TK:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICG2DQ6TK"}
][2025-09-13 09:31:31.407 +08:00 INF Processing 1 valid items to add to order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"8b27cb8c-dc7a-4284-9756-024b74a624f9","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TK:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICG2DQ6TK"}
][2025-09-13 09:31:31.419 +08:00 INF Successfully added/updated items in order "36f59c20-4ee3-4838-9fbc-7859bac45073": 0 new, 1 updated. {"SourceContext":"OrderService.Services.OrderService","ActionId":"8b27cb8c-dc7a-4284-9756-024b74a624f9","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TK:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICG2DQ6TK"}
][2025-09-13 09:31:31.425 +08:00 INF Updated order event for order "36f59c20-4ee3-4838-9fbc-7859bac45073" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"8b27cb8c-dc7a-4284-9756-024b74a624f9","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TK:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICG2DQ6TK"}
][2025-09-13 09:31:31.437 +08:00 INF Successfully updated order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"8b27cb8c-dc7a-4284-9756-024b74a624f9","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICG2DQ6TK:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICG2DQ6TK"}
][2025-09-13 09:41:25.000 +08:00 INF Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:41:25.057 +08:00 INF Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:41:32.134 +08:00 INF Starting up OrderService {}
][2025-09-13 09:41:32.261 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_1bryyy858hofc7htbdq9r3ikge, Consumer: OrderService.Consumers.PaymentFailedConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:41:32.267 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_1bryyy858hofc7htbdq9r3ikge, Consumer: OrderService.Consumers.PaymentSucceededConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:41:32.410 +08:00 INF Now listening on: http://localhost:5221 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:41:32.413 +08:00 INF Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:41:32.414 +08:00 INF Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:41:32.416 +08:00 INF Content root path: C:\Users\jeffr\Documents\Programming\Chomp\OrderService {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:41:32.552 +08:00 INF Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:42:06.315 +08:00 WRN Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNFICQVGR7FR:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:06.577 +08:00 INF Updating order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"9d0a580f-8f53-4b88-b4fa-4ad1384ea24a","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICQVGR7FR:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:07.687 +08:00 INF Performing smart merge for order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"9d0a580f-8f53-4b88-b4fa-4ad1384ea24a","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICQVGR7FR:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:07.784 +08:00 INF Updated order event for order "36f59c20-4ee3-4838-9fbc-7859bac45073" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"9d0a580f-8f53-4b88-b4fa-4ad1384ea24a","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICQVGR7FR:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:07.899 +08:00 INF Successfully updated order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"9d0a580f-8f53-4b88-b4fa-4ad1384ea24a","ActionName":"OrderService.Controllers.OrderController.EditOrder (OrderService)","RequestId":"0HNFICQVGR7FR:00000001","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:25.592 +08:00 INF Adding items to order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"46172c17-df6b-4b15-90fb-d69ac041d62a","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000002","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:25.616 +08:00 INF Processing 1 valid items to add to order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"46172c17-df6b-4b15-90fb-d69ac041d62a","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000002","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:25.624 +08:00 INF Successfully added/updated items in order "36f59c20-4ee3-4838-9fbc-7859bac45073": 0 new, 1 updated. {"SourceContext":"OrderService.Services.OrderService","ActionId":"46172c17-df6b-4b15-90fb-d69ac041d62a","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000002","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:25.630 +08:00 INF Updated order event for order "36f59c20-4ee3-4838-9fbc-7859bac45073" is passed to the message bus. {"SourceContext":"OrderService.Services.OrderService","ActionId":"46172c17-df6b-4b15-90fb-d69ac041d62a","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000002","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:25.641 +08:00 INF Successfully updated order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"46172c17-df6b-4b15-90fb-d69ac041d62a","ActionName":"OrderService.Controllers.OrderController.AddOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000002","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:42:49.806 +08:00 INF Getting order - Admin Request for order "36f59c20-4ee3-4838-9fbc-7859bac45073" {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"70ce383e-a996-41f2-b225-aa12d8ed13c1","ActionName":"OrderService.Controllers.OrderController.GetOrderById (OrderService)","RequestId":"0HNFICQVGR7FR:00000005","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:12.378 +08:00 INF Removing items from order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000006","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:12.393 +08:00 INF Attempting to remove quantities from 1 product(s) in order "36f59c20-4ee3-4838-9fbc-7859bac45073" {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000006","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:12.398 +08:00 WRN Product "58b063f0-63da-46d1-94a8-d0dc5c0182c1" not found in order "36f59c20-4ee3-4838-9fbc-7859bac45073" - skipping {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000006","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:12.403 +08:00 WRN No valid items found to remove from order "36f59c20-4ee3-4838-9fbc-7859bac45073" {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000006","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:31.824 +08:00 INF Removing items from order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000007","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:31.835 +08:00 INF Attempting to remove quantities from 1 product(s) in order "36f59c20-4ee3-4838-9fbc-7859bac45073" {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000007","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:31.840 +08:00 INF Reduced quantity for product "27a55e5e-9e49-4b0f-bee8-60cd6f2784ca" in order "36f59c20-4ee3-4838-9fbc-7859bac45073": 4 -> 1 {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000007","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:31.855 +08:00 INF Successfully updated order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000007","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:40.312 +08:00 INF Removing items from order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Controllers.OrderController","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000008","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:40.333 +08:00 INF Attempting to remove quantities from 1 product(s) in order "36f59c20-4ee3-4838-9fbc-7859bac45073" {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000008","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:40.337 +08:00 INF Removing entire order item for product "27a55e5e-9e49-4b0f-bee8-60cd6f2784ca" from order "36f59c20-4ee3-4838-9fbc-7859bac45073" (requested: 1, current: 1) {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000008","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:40.368 +08:00 INF Successfully updated order "36f59c20-4ee3-4838-9fbc-7859bac45073". {"SourceContext":"OrderService.Services.OrderService","ActionId":"b64dbe6a-6577-4d53-83b7-3d3d31011737","ActionName":"OrderService.Controllers.OrderController.RemoveOrderItems (OrderService)","RequestId":"0HNFICQVGR7FR:00000008","RequestPath":"/api/Order/36f59c20-4ee3-4838-9fbc-7859bac45073/items","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:43:59.435 +08:00 INF Getting all products - Admin Request {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"812264d1-3c58-48f6-bd2f-96ceaffb844b","ActionName":"OrderService.Controllers.ProductController.GetAll (OrderService)","RequestId":"0HNFICQVGR7FR:00000009","RequestPath":"/api/Product","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:44:15.399 +08:00 INF CreateProduct endpoint called for product: Volleyball {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"aeab389d-edab-4927-a003-784e1aa8e29a","ActionName":"OrderService.Controllers.ProductController.CreateProduct (OrderService)","RequestId":"0HNFICQVGR7FR:0000000A","RequestPath":"/api/Product","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:44:15.441 +08:00 INF Successfully created product "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Services.ProductService","ActionId":"aeab389d-edab-4927-a003-784e1aa8e29a","ActionName":"OrderService.Controllers.ProductController.CreateProduct (OrderService)","RequestId":"0HNFICQVGR7FR:0000000A","RequestPath":"/api/Product","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:44:15.446 +08:00 INF Product creation completed successfully for: "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"aeab389d-edab-4927-a003-784e1aa8e29a","ActionName":"OrderService.Controllers.ProductController.CreateProduct (OrderService)","RequestId":"0HNFICQVGR7FR:0000000A","RequestPath":"/api/Product","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:44:26.270 +08:00 INF Getting product - Admin Request for product "4c5d0112-89be-40b7-9a84-d834a36c8c9c" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"743d982f-e7be-4b59-a4c0-8bd45448a088","ActionName":"OrderService.Controllers.ProductController.GetProductById (OrderService)","RequestId":"0HNFICQVGR7FR:0000000B","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9c","ConnectionId":"0HNFICQVGR7FR"}
][2025-09-13 09:44:26.284 +08:00 ERR Unhandled exception occurred while processing /api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9c {"RequestId":"0HNFICQVGR7FR:0000000B","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9c","ConnectionId":"0HNFICQVGR7FR"}
System.InvalidOperationException: The LINQ expression 'DbSet<Product>()
    .Where(p => new ProductDto(
        p.ProductId, 
        p.ProductName, 
        p.Price, 
        p.Stock
    ).ProductId == __productId_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at OrderService.Services.ProductService.GetProductByIdAsync(Guid productId) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Services\ProductService.cs:line 189
   at OrderService.Controllers.ProductController.GetProductById(Guid productId) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Controllers\ProductController.cs:line 54
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at OrderService.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\jeffr\Documents\Programming\Chomp\OrderService\Middleware\ExceptionHandlingMiddleware.cs:line 21
][2025-09-13 09:45:09.668 +08:00 INF Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:45:09.850 +08:00 INF Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:45:14.287 +08:00 INF Starting up OrderService {}
][2025-09-13 09:45:14.445 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_stdoyy858hofcd1obdq9r33xbz, Consumer: OrderService.Consumers.PaymentFailedConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:45:14.450 +08:00 INF Configured endpoint DESKTOPHUMQD41_OrderService_endpoint_stdoyy858hofcd1obdq9r33xbz, Consumer: OrderService.Consumers.PaymentSucceededConsumer {"SourceContext":"MassTransit"}
][2025-09-13 09:45:14.579 +08:00 INF Now listening on: http://localhost:5221 {"EventId":{"Id":14,"Name":"ListeningOnAddress"},"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:45:14.582 +08:00 INF Application started. Press Ctrl+C to shut down. {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:45:14.583 +08:00 INF Hosting environment: Development {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:45:14.584 +08:00 INF Content root path: C:\Users\jeffr\Documents\Programming\Chomp\OrderService {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:45:14.734 +08:00 INF Bus started: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
][2025-09-13 09:45:22.288 +08:00 WRN Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNFICSPU1SLS:00000001","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9c","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:45:22.397 +08:00 INF Getting product - Admin Request for product "4c5d0112-89be-40b7-9a84-d834a36c8c9c" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"b7694bb1-2c07-4d7a-a964-58af1e30e817","ActionName":"OrderService.Controllers.ProductController.GetProductById (OrderService)","RequestId":"0HNFICSPU1SLS:00000001","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9c","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:45:33.697 +08:00 INF Getting product - Admin Request for product "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"b7694bb1-2c07-4d7a-a964-58af1e30e817","ActionName":"OrderService.Controllers.ProductController.GetProductById (OrderService)","RequestId":"0HNFICSPU1SLS:00000002","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:45:53.137 +08:00 INF EditProduct endpoint called for product: "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"8d664acb-1d60-4f74-84fc-fedb49c5aba5","ActionName":"OrderService.Controllers.ProductController.EditProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000003","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:45:53.459 +08:00 INF Successfully updated product "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Services.ProductService","ActionId":"8d664acb-1d60-4f74-84fc-fedb49c5aba5","ActionName":"OrderService.Controllers.ProductController.EditProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000003","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:45:53.463 +08:00 INF Product update completed successfully for: "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"8d664acb-1d60-4f74-84fc-fedb49c5aba5","ActionName":"OrderService.Controllers.ProductController.EditProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000003","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:46:02.151 +08:00 INF DeleteProduct endpoint called for product: "4c5d0112-89be-40b7-9a84-d834a36c8c9c" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"088c77e6-5426-45ec-8cff-ca20f4197732","ActionName":"OrderService.Controllers.ProductController.DeleteProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000004","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9c","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:46:02.158 +08:00 WRN Product not found during deletion: There is no product with ID 4c5d0112-89be-40b7-9a84-d834a36c8c9c in the database. {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"088c77e6-5426-45ec-8cff-ca20f4197732","ActionName":"OrderService.Controllers.ProductController.DeleteProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000004","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9c","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:46:05.828 +08:00 INF DeleteProduct endpoint called for product: "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"088c77e6-5426-45ec-8cff-ca20f4197732","ActionName":"OrderService.Controllers.ProductController.DeleteProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000005","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:46:05.884 +08:00 INF Successfully deleted product "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Services.ProductService","ActionId":"088c77e6-5426-45ec-8cff-ca20f4197732","ActionName":"OrderService.Controllers.ProductController.DeleteProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000005","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:46:05.888 +08:00 INF Product deletion completed successfully for: "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"088c77e6-5426-45ec-8cff-ca20f4197732","ActionName":"OrderService.Controllers.ProductController.DeleteProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000005","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:46:11.675 +08:00 INF EditProduct endpoint called for product: "4c5d0112-89be-40b7-9a84-d834a36c8c9a" {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"8d664acb-1d60-4f74-84fc-fedb49c5aba5","ActionName":"OrderService.Controllers.ProductController.EditProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000006","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:46:11.681 +08:00 WRN Product not found during update: There is no product with ID 4c5d0112-89be-40b7-9a84-d834a36c8c9a in the database. {"SourceContext":"OrderService.Controllers.ProductController","ActionId":"8d664acb-1d60-4f74-84fc-fedb49c5aba5","ActionName":"OrderService.Controllers.ProductController.EditProduct (OrderService)","RequestId":"0HNFICSPU1SLS:00000006","RequestPath":"/api/Product/4c5d0112-89be-40b7-9a84-d834a36c8c9a","ConnectionId":"0HNFICSPU1SLS"}
][2025-09-13 09:47:42.164 +08:00 INF Application is shutting down... {"SourceContext":"Microsoft.Hosting.Lifetime"}
][2025-09-13 09:47:42.226 +08:00 INF Bus stopped: "rabbitmq://localhost/" {"SourceContext":"MassTransit"}
]